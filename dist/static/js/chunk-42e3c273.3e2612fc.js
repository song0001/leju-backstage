(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42e3c273"],{"0c6d":function(e,t,r){"use strict";r("d3b7");var a=r("bc3a"),s=r.n(a),n=r("5c96"),i=r("2f4d"),l=r("a18c"),o=s.a.create({timeout:5e3});o.interceptors.request.use((function(e){var t=Object(i["b"])();return t&&(e.headers["token"]=t),e}),(function(e){return console.log(e),Promise.reject(e)})),o.interceptors.response.use((function(e){var t=e.data;return 20002==t.code&&(Object(i["a"])(),l["b"].push("/login")),t}),(function(e){return console.log("err"+e),Object(n["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=o},"3a10":function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return n})),r.d(t,"j",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"h",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"a",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"g",(function(){return m}));r("99af");var a=r("0c6d");function s(e,t,r){return Object(a["a"])({url:"/lejuAdmin/order/findOrdersByPage/".concat(e,"/").concat(t),method:"post",data:r})}function n(e){return Object(a["a"])({url:"/lejuAdmin/order/orderDetail/".concat(e),method:"get"})}function i(e){return Object(a["a"])({url:"/lejuAdmin/order/sendDone",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/lejuAdmin/order/finishOrder/".concat(e),method:"post"})}function o(e){return Object(a["a"])({url:"/lejuAdmin/order/receiveProductsForce/".concat(e),method:"post"})}function c(e,t,r){return Object(a["a"])({url:"/lejuAdmin/orderReturn/findReturnApply/".concat(e,"/").concat(t),method:"post",data:r})}function u(e){return Object(a["a"])({url:"/lejuAdmin/orderReturn/".concat(e),method:"get"})}function d(e,t){return Object(a["a"])({url:"/lejuAdmin/orderReturn/agreeApply/".concat(e),method:"post",data:t})}function p(e,t){return Object(a["a"])({url:"/lejuAdmin/orderReturn/rejectApply/".concat(e),method:"post",data:t})}function m(e,t){return Object(a["a"])({url:"/lejuAdmin/orderReturn/receiveProduct/".concat(e),method:"post",data:t})}},"6bc3":function(e,t,r){"use strict";r("7cde")},"7cde":function(e,t,r){},9555:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"card"},[r("div",{staticClass:"table-main"},[r("div",{staticClass:"table-title"},[e._v(" 订单信息: "),r("span",{staticStyle:{"margin-left":"10px"}},[0===e.status?r("el-tag",{attrs:{type:"danger",size:"small",effect:"dark"}},[e._v(" "+e._s(e.statusList[0].name)+" ")]):1===e.status?r("el-tag",{attrs:{size:"small",type:"warning",effect:"dark"}},[e._v(e._s(e.statusList[1].name))]):2===e.status?r("el-tag",{attrs:{size:"small"}},[e._v(" "+e._s(e.statusList[2].name)+" ")]):3===e.status?r("el-tag",{attrs:{size:"small",type:"info",effect:"dark"}},[e._v(e._s(e.statusList[3].name))]):e._e()],1)]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[e._v(" 订单编号: "),r("span",[e._v(e._s(e.detailObj.orderSn))]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:e.goOrderDetail}},[e._v("查看订单详情")])],1),r("el-col",{attrs:{span:6}},[e._v(" 退单人姓名 : "+e._s(e.detailObj.returnName))]),r("el-col",{attrs:{span:6}},[e._v(" 退单理由 :"+e._s(e.detailObj.reason)+" ")]),r("el-col",{attrs:{span:6}},[e._v(" 退单描述 :"+e._s(e.detailObj.description)+" ")])],1),r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[e._v(" 申请时间 :"+e._s(e.detailObj.createTime)+" ")])],1),e.imgList.length>0?r("div",{staticClass:"img_main"},[r("div",{staticClass:"left"},[e._v("退单图片:")]),r("div",{staticClass:"right"},e._l(e.imgList,(function(t,a){return r("el-image",{key:a,staticStyle:{width:"100px",height:"100px","margin-right":"20px"},attrs:{src:t,"preview-src-list":e.imgList}})})),1)]):e._e()],1),r("el-divider"),r("div",[r("span",{staticClass:"table-title"},[e._v("退货商品:")]),r("span",{staticStyle:{"margin-left":"10px"}}),r("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.productList,border:""}},[r("el-table-column",{attrs:{prop:"productName",label:"商品图片",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.productPic,alt:""}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"商品描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",[e._v(e._s(t.row.productName))]),r("p",[e._v("品牌: "+e._s(t.row.productBrand))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"商品价格",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.productRealPrice))])]}}])}),r("el-table-column",{attrs:{align:"center",prop:"productAttr",label:"商品属性",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(JSON.parse(t.row.productAttr),(function(t){return r("div",{key:t.id},[r("span",[e._v(e._s(t.key)+":"+e._s(t.value))])])}))}}])}),r("el-table-column",{attrs:{align:"center",prop:"productCount",label:"商品数量",width:"250"}}),r("el-table-column",{attrs:{align:"center",prop:"returnAmount",label:"总计"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.returnAmount))])]}}])})],1)],1),r("el-divider"),r("div",{staticClass:"table-title"},[e._v(" 用户信息: "),r("span",{staticStyle:{"margin-left":"10px"}})]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("span",[e._v("联系人:"+e._s(e.detailObj.memberUsername)+" ")])]),r("el-col",{attrs:{span:6}},[e._v(" 联系电话 : "),r("span",[e._v(e._s(e.detailObj.returnPhone))])])],1)],1),e.status>1?r("el-divider"):e._e(),r("div",{staticClass:"table-title"},[e._v(" 费用信息: "),r("span",{staticStyle:{"margin-left":"10px"}})]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[e._v(" 退单金额: "),r("span",{staticClass:"totalAmount"},[e._v(e._s(e.detailObj.returnAmount)+" ")])]),r("el-col",{attrs:{span:6}},[e._v(" 运费金额 : "),r("span",{staticClass:"totalAmount"},[e._v("0")])])],1)],1),0===e.status?r("div",{style:{width:"100%",margin:"10px auto",fontSize:"16px"}},[r("el-form",{ref:"handleForm",staticClass:"form-lable",attrs:{model:e.handleForm,rules:e.handleRules,size:"mini"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6,offset:0}},[r("el-form-item",{attrs:{prop:"returnAmount",label:"确认退款金额"}},[r("el-input-number",{staticClass:"myInput",attrs:{placeholder:"",size:"mini"},model:{value:e.handleForm.returnAmount,callback:function(t){e.$set(e.handleForm,"returnAmount",t)},expression:"handleForm.returnAmount"}})],1)],1),r("el-col",{attrs:{span:6,offset:0}},[r("el-form-item",{attrs:{prop:"handleMan",label:"处理人"}},[r("el-input",{staticClass:"myInput",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.handleForm.handleMan,callback:function(t){e.$set(e.handleForm,"handleMan",t)},expression:"handleForm.handleMan"}})],1)],1),r("el-col",{attrs:{span:6,offset:0}},[r("el-form-item",{attrs:{prop:"handleNote",label:"处理备注"}},[r("el-input",{staticClass:"myInput",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.handleForm.handleNote,callback:function(t){e.$set(e.handleForm,"handleNote",t)},expression:"handleForm.handleNote"}})],1)],1)],1)],1)],1):e._e(),e.status>1?r("el-divider"):e._e(),0!==e.status?r("div",[r("div",{staticClass:"table-title"},[e._v(" 处理结果: "),r("span",{staticStyle:{"margin-left":"10px"}})]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[e._v(" 处理人: "),r("span",[e._v(e._s(e.detailObj.handleMan)+" ")])]),r("el-col",{attrs:{span:6}},[e._v(" 处理备注 : "),r("span",[e._v(e._s(e.detailObj.handleNote))])]),r("el-col",{attrs:{span:6}},[e._v(" 处理时间 : "),r("span",[e._v(e._s(e.detailObj.handleTime))])])],1)],1)]):e._e(),e.status>1?r("el-divider"):e._e(),2===e.status?r("div",[r("div",{staticClass:"table-title"},[e._v(" 收货信息: "),r("span",{staticStyle:{"margin-left":"10px"}})]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[e._v(" 退单收货人: "),r("span",[e._v(e._s(e.detailObj.receiveMan)+" ")])]),r("el-col",{attrs:{span:6}},[e._v(" 退单收货备注 : "),r("span",[e._v(e._s(e.detailObj.receiveNote))])]),r("el-col",{attrs:{span:6}},[e._v(" 退单收货时间 : "),r("span",[e._v(e._s(e.detailObj.receiveTime))])])],1)],1)]):e._e(),1===e.status?r("div",{style:{width:"100%",margin:"10px auto",fontSize:"16px"}},[r("el-form",{ref:"receiveForm",staticClass:"form-lable",attrs:{model:e.receiveForm,rules:e.receiveRules,size:"mini"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6,offset:0}},[r("el-form-item",{attrs:{label:"收货人",prop:"receiveMan"}},[r("el-input",{staticClass:"myInput myInput2",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.receiveForm.receiveMan,callback:function(t){e.$set(e.receiveForm,"receiveMan",t)},expression:"receiveForm.receiveMan"}})],1)],1),r("el-col",{attrs:{span:6,offset:0}},[r("el-form-item",{attrs:{label:"收货备注",prop:"receiveNote"}},[r("el-input",{staticClass:"myInput myInput2",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.receiveForm.receiveNote,callback:function(t){e.$set(e.receiveForm,"receiveNote",t)},expression:"receiveForm.receiveNote"}})],1)],1)],1)],1)],1):e._e()],1),r("div",{staticClass:"button_main"},[0===e.status?r("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:e.agreeReturn}},[e._v("同意退款 ")]):e._e(),1===e.status?r("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:e.receiveReturn}},[e._v("确认收货 ")]):e._e(),0===e.status?r("el-button",{staticStyle:{width:"150px"},attrs:{size:"small"},on:{click:e.rejectReturn}},[e._v("拒绝退款 ")]):e._e()],1)])],1)},s=[],n=(r("ac1f"),r("1276"),r("3a10")),i=r("ffac"),l={data:function(){return{id:"",statusList:[{name:"待处理",id:0},{name:"退货中",id:1},{name:"已完成",id:2},{name:"已拒绝",id:3}],imgList:[],forceSendShow:!1,status:-1,detailObj:{},productList:[],handleForm:{returnAmount:0,handleNote:"",handleMan:""},receiveForm:{receiveNote:"",receiveMan:""},handleRules:{handleMan:[{required:!0,message:"处理人姓名",trigger:"blur"}],handleNote:[{required:!0,message:"处理人备注",trigger:"blur"}]},receiveRules:{receiveMan:[{required:!0,message:"收货人姓名",trigger:"blur"}],receiveNote:[{required:!0,message:"收货人备注",trigger:"blur"}]}}},created:function(){this.getOrderReturn()},computed:{expressData:function(){return i.Traces}},methods:{getOrderReturn:function(){var e=this;this.id=this.$route.query.id,console.log(this.id),Object(n["f"])(this.id).then((function(t){console.log("退单详情",t),e.status=t.data.orderReturnApply.status,e.detailObj=t.data.orderReturnApply,e.initProductTable(),e.initImgs()}))},initProductTable:function(){var e={productPic:this.detailObj.productPic,productName:this.detailObj.productName,productAttr:this.detailObj.productAttr,productCount:this.detailObj.productCount,productBrand:this.detailObj.productBrand,productRealPrice:this.detailObj.productRealPrice,returnAmount:this.detailObj.returnAmount};this.productList.push(e)},initImgs:function(){this.detailObj.proofPics&&(this.imgList=this.detailObj.proofPics.split(","))},goOrderDetail:function(){this.$router.push({path:"orderDetail",query:{id:this.detailObj.orderId}})},agreeReturn:function(){var e=this;this.$refs.handleForm.validate((function(t){t?Object(n["a"])(e.id,{id:e.id,handleMan:e.handleForm.handleMan,handleNote:e.handleForm.handleNote,returnAmount:e.handleForm.returnAmount}).then((function(t){t.success?(e.$message.success("同意退款成功"),e.getOrderReturn()):e.$message.error("请求失败")})).catch((function(t){e.$message.error("请求失败")})):e.$message.warning("请填写必要信息")}))},receiveReturn:function(){var e=this;this.$refs.receiveForm.validate((function(t){t?Object(n["g"])(e.id,{id:e.id,receiveMan:e.receiveForm.receiveMan,receiveNote:e.receiveForm.receiveNote}).then((function(t){t.success?(e.$message.success("确认收货成功"),window.location.reload()):e.$message.error("请求失败")})):e.$message.warning("请填写必要信息")}))},rejectReturn:function(){var e=this;this.$refs.handleForm.validate((function(t){t?Object(n["i"])(e.id,{id:e.id,handleMan:e.handleForm.handleMan,handleNote:e.handleForm.handleNote}).then((function(t){t.success?(e.$message.success("拒绝退款成功"),e.getOrderReturn()):e.$message.error("请求失败")})).catch((function(t){e.$message.error("请求失败")})):e.$message.warning("请填写必要信息")}))},goReturn:function(e){}}},o=l,c=(r("6bc3"),r("2877")),u=Object(c["a"])(o,a,s,!1,null,"666380b0",null);t["default"]=u.exports},ffac:function(e){e.exports=JSON.parse('{"EBusinessID":"1109259","OrderCode":"","ShipperCode":"EMS","LogisticCode":"5042260908504","Success":true,"Reason":"","State":"2","CallBack":"0","Traces":[{"AcceptTime":"2015-03-06 21:16:58","AcceptStation":"深圳市横岗速递营销部已收件","Remark":"揽投员姓名：钟定基;联系电话：13883838888"},{"AcceptTime":"2015-03-07 14:25:00","AcceptStation":"离开深圳市 发往广州市","Remark":""},{"AcceptTime":"2015-03-08 00:17:00","AcceptStation":"到达广东速递物流公司广航中心处理中心（经转）","Remark":""},{"AcceptTime":"2015-03-08 01:15:00","AcceptStation":"离开广州市 发往北京市（经转）","Remark":""},{"AcceptTime":"2015-03-09 09:01:00","AcceptStation":"到达北京黄村转运站处理中心（经转）","Remark":""},{"AcceptTime":"2015-03-09 18:39:00","AcceptStation":"离开北京市 发往呼和浩特市（经转）","Remark":""},{"AcceptTime":"2015-03-10 18:06:00","AcceptStation":"到达  呼和浩特市 处理中心","Remark":""},{"AcceptTime":"2015-03-11 09:53:48","AcceptStation":"呼和浩特市邮政速递物流分公司金川揽投部安排投递","Remark":"投递员姓名：安长虹;联系电话：18047140142"}]}')}}]);