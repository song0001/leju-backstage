(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a809aff8"],{"02cf":function(e,t,l){},"0c6d":function(e,t,l){"use strict";l("d3b7");var a=l("bc3a"),r=l.n(a),i=l("5c96"),s=l("2f4d"),n=l("a18c"),o=r.a.create({timeout:5e3});o.interceptors.request.use((function(e){var t=Object(s["b"])();return t&&(e.headers["token"]=t),e}),(function(e){return console.log(e),Promise.reject(e)})),o.interceptors.response.use((function(e){var t=e.data;return 20002==t.code&&(Object(s["a"])(),n["b"].push("/login")),t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=o},"0d59":function(e,t,l){"use strict";l("69fe")},"1b62":function(e,t,l){"use strict";var a=l("2f4d");t["a"]={data:function(){return{page:{currentPage:1,size:10,pageSizes:[10,20,30,40],total:0},uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(a["b"])()}}}}},3545:function(e,t,l){},"47ba":function(e,t,l){"use strict";l.d(t,"a",(function(){return r})),l.d(t,"b",(function(){return i}));var a=l("0c6d");function r(){return Object(a["a"])({url:"/lejuAdmin/category/getAllCategory",method:"get"})}function i(e){return Object(a["a"])({url:" /lejuAdmin/category/updateCategory",method:"post",data:e})}},5278:function(e,t,l){"use strict";l("02cf")},"555e":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-card",{attrs:{shadow:"never"}},[l("el-steps",{attrs:{active:e.step,"finish-status":"success"}},[l("el-step",{attrs:{title:"基本商品信息"}}),l("el-step",{attrs:{title:"添加库存信息"}}),l("el-step",{attrs:{title:"添加移动端详情"}})],1)],1),l("el-card",{staticClass:"card",attrs:{shadow:"never"}},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[l("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}]},[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",[e._v("基本信息")])]),l("el-divider"),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"商品名称",prop:"name",size:"small"}},[l("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"商品编码",prop:"productSn",size:"small"}},[l("el-input",{attrs:{placeholder:"商品编码"},model:{value:e.ruleForm.productSn,callback:function(t){e.$set(e.ruleForm,"productSn",t)},expression:"ruleForm.productSn"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"商品分类",size:"small"}},[l("el-select",{attrs:{placeholder:"商品分类",clearable:""},model:{value:e.ruleForm.productCategoryId,callback:function(t){e.$set(e.ruleForm,"productCategoryId",t)},expression:"ruleForm.productCategoryId"}},e._l(e.productCategoryList,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"商品品牌"}},[l("el-select",{attrs:{placeholder:"商品品牌",size:"small"},model:{value:e.ruleForm.brandId,callback:function(t){e.$set(e.ruleForm,"brandId",t)},expression:"ruleForm.brandId"}},e._l(e.brandList,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),l("el-col",{attrs:{span:18}},[l("el-form-item",{attrs:{label:"商品描述"}},[l("el-input",{attrs:{type:"textarea",placeholder:"商品描述"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1)],1),l("span",[e._v("商品属性")]),l("el-divider"),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"商品原价",size:"small"}},[l("el-input-number",{attrs:{min:0,placeholder:"商品原价"},on:{input:e.originalPriceChange},model:{value:e.ruleForm.originalPrice,callback:function(t){e.$set(e.ruleForm,"originalPrice",t)},expression:"ruleForm.originalPrice"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"促销类型",size:"small"}},[l("el-select",{staticClass:"myInput",attrs:{placeholder:"促销类型",clearable:"",disabled:""},model:{value:e.ruleForm.promotionType,callback:function(t){e.$set(e.ruleForm,"promotionType",t)},expression:"ruleForm.promotionType"}},[l("el-option",{attrs:{label:"没有促销使用原价",value:e.ruleForm.promotionType}})],1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"活动价格",size:"small"}},[l("el-input-number",{attrs:{value:"0",disabled:"",min:0}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"重量(kg)",size:"small"}},[l("el-input-number",{attrs:{min:0,placeholder:"重量"},model:{value:e.ruleForm.weight,callback:function(t){e.$set(e.ruleForm,"weight",t)},expression:"ruleForm.weight"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"审核状态",size:"small"}},[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.verifyStatus,callback:function(t){e.$set(e.ruleForm,"verifyStatus",t)},expression:"ruleForm.verifyStatus"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"是否上架",size:"small"}},[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.publishStatus,callback:function(t){e.$set(e.ruleForm,"publishStatus",t)},expression:"ruleForm.publishStatus"}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"缩略图",size:"small"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl1,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.ruleForm.pic?l("img",{staticClass:"avatar",attrs:{src:e.ruleForm.pic}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),l("span",[e._v("其他信息")]),l("el-divider"),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"推荐状态",size:"small"}},[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.recommendStatus,callback:function(t){e.$set(e.ruleForm,"recommendStatus",t)},expression:"ruleForm.recommendStatus"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"新品状态",size:"small"}},[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.newStatus,callback:function(t){e.$set(e.ruleForm,"newStatus",t)},expression:"ruleForm.newStatus"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"预告商品",size:"small"}},[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.previewStatus,callback:function(t){e.$set(e.ruleForm,"previewStatus",t)},expression:"ruleForm.previewStatus"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"搜索关键词",size:"small"}},[l("el-input",{staticClass:"myInput",attrs:{placeholder:"关键词"},model:{value:e.ruleForm.keywords,callback:function(t){e.$set(e.ruleForm,"keywords",t)},expression:"ruleForm.keywords"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"库存预警",size:"small"}},[l("el-input-number",{staticClass:"myInput",attrs:{min:0},model:{value:e.ruleForm.lowStock,callback:function(t){e.$set(e.ruleForm,"lowStock",t)},expression:"ruleForm.lowStock"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"商品排序",size:"small"}},[l("el-input-number",{staticClass:"myInput",attrs:{min:0,placeholder:"排序"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1)],1),l("el-col",{attrs:{span:16,offset:0}},[l("el-form-item",{attrs:{label:"产品服务",size:"small"}},[l("el-checkbox-group",{model:{value:e.serviceIds,callback:function(t){e.serviceIds=t},expression:"serviceIds"}},[l("el-checkbox",{attrs:{label:"1",name:"type"}},[e._v("无忧退货")]),l("el-checkbox",{attrs:{label:"2",name:"type"}},[e._v("快速退款")]),l("el-checkbox",{attrs:{label:"3",name:"type"}},[e._v("免费包邮")])],1)],1)],1)],1)],1),l("div",{directives:[{name:"show",rawName:"v-show",value:2==e.step,expression:"step == 2"}]},[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",[e._v("商品sku信息")])]),l("el-divider"),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"标题",size:"small"}},[l("el-input",{attrs:{placeholder:"标题"},model:{value:e.ruleForm.detailTitle,callback:function(t){e.$set(e.ruleForm,"detailTitle",t)},expression:"ruleForm.detailTitle"}})],1)],1),l("el-col",{attrs:{span:12,offset:0}},[l("el-form-item",{attrs:{label:"副标题",size:"small"}},[l("el-input",{attrs:{placeholder:"副标题"},model:{value:e.ruleForm.detailDesc,callback:function(t){e.$set(e.ruleForm,"detailDesc",t)},expression:"ruleForm.detailDesc"}})],1)],1),l("el-col",[l("el-form-item",{staticClass:"albumPics",attrs:{label:"画册图片",size:"small"}},[l("el-upload",{attrs:{action:e.uploadUrl1,headers:e.uploadHeaders,"on-remove":e.handleRemove,"file-list":e.fileList,"on-success":e.imgUploadSuccess,limit:5,"on-preview":e.handlePictureCardPreview,"list-type":"picture-card"}},[l("i",{staticClass:"el-icon-plus"}),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb,文件不超过5个 ")])]),l("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1),l("el-row",[l("el-col",[l("el-form-item",{attrs:{label:"sku设置",size:"small"}},[l("div",{directives:[{name:"show",rawName:"v-show",value:e.skuColorList.length>0,expression:"skuColorList.length > 0"}],staticStyle:{display:"flex"}},[e._v(" 颜色: "),l("el-checkbox-group",{on:{change:e.handleCheckAllChange},model:{value:e.skuColorSel,callback:function(t){e.skuColorSel=t},expression:"skuColorSel"}},e._l(e.skuColorList,(function(t,a){return l("el-checkbox",{key:a,attrs:{label:t}},[l("span",[e._v(e._s(t.text))]),l("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:function(l){return e.delParam(t,"skuColorList","skuColorSel")}}},[e._v("删除")])],1)})),1)],1),l("div",{directives:[{name:"show",rawName:"v-show",value:e.skuSizeList.length>0,expression:"skuSizeList.length > 0"}],staticStyle:{display:"flex"}},[e._v(" 大小: "),l("el-checkbox-group",{model:{value:e.skuSizeSel,callback:function(t){e.skuSizeSel=t},expression:"skuSizeSel"}},e._l(e.skuSizeList,(function(t,a){return l("el-checkbox",{key:a,attrs:{label:t}},[l("span",[e._v(e._s(t.text))]),l("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:function(l){return e.delParam(t,"skuSizeList","skuSizeSel")}}},[e._v("删除")])],1)})),1)],1)])],1),l("el-col",{attrs:{span:12}},[l("div",{staticStyle:{display:"flex"}},[l("el-form-item",{attrs:{size:"small"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"颜色描述：比如土豪金"},model:{value:e.skuColorObj.text,callback:function(t){e.$set(e.skuColorObj,"text",t)},expression:"skuColorObj.text"}}),l("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.addSkuObj("skuColorObj","skuColorList")}}},[e._v("创建颜色选项")])],1),l("el-form-item",{attrs:{size:"small"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"大小"},model:{value:e.skuSizeObj.text,callback:function(t){e.$set(e.skuSizeObj,"text",t)},expression:"skuSizeObj.text"}}),l("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.addSkuObj("skuSizeObj","skuSizeList")}}},[e._v("创建大小选项")])],1)],1)]),l("el-col",{attrs:{span:6}},[l("div",{staticStyle:{"margin-left":"200px"}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createSkus}},[e._v("生成sku列表")]),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.createSkus("add")}}},[e._v("新增sku")])],1)]),l("el-col",[l("el-form-item",[l("el-table",{directives:[{name:"show",rawName:"v-show",value:e.skuList.length>0,expression:"skuList.length > 0"}],staticClass:"sku_table",attrs:{size:"mini",data:e.skuList,border:""}},[l("el-table-column",{attrs:{type:"index",label:"#",fixed:"left"}}),l("el-table-column",{attrs:{label:"图片",width:120,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-upload",{staticStyle:{width:"100px",height:"100px"},attrs:{action:e.uploadUrl1,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleTableSuccess},nativeOn:{click:function(l){return e.getTableItem(t.row)}}},[t.row.pic?l("img",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.pic}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"100px",height:"100px","margin-top":"-31px"}})])]}}])}),l("el-table-column",{attrs:{label:"颜色",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"mini"},model:{value:t.row.spData[0].value,callback:function(l){e.$set(t.row.spData[0],"value",l)},expression:"scope.row.spData[0].value"}})]}}])}),l("el-table-column",{attrs:{label:"大小",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.spData[1]?l("el-input",{attrs:{size:"mini"},model:{value:t.row.spData[1].value,callback:function(l){e.$set(t.row.spData[1],"value",l)},expression:"scope.row.spData[1].value"}}):e._e()]}}])}),l("el-table-column",{attrs:{label:"库存",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"mini",placeholder:"自定义库存"},model:{value:t.row.stock,callback:function(l){e.$set(t.row,"stock",l)},expression:"scope.row.stock"}})]}}])}),l("el-table-column",{attrs:{label:"预警库存",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"mini",placeholder:"预警库存"},model:{value:t.row.lowStock,callback:function(l){e.$set(t.row,"lowStock",l)},expression:"scope.row.lowStock"}})]}}])}),l("el-table-column",{attrs:{label:"锁定库存",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"mini",placeholder:"锁定库存"},model:{value:t.row.lockStock,callback:function(l){e.$set(t.row,"lockStock",l)},expression:"scope.row.lockStock"}})]}}])}),l("el-table-column",{attrs:{label:"sku编码",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"mini",placeholder:"自定义sku编码"},model:{value:t.row.skuCode,callback:function(l){e.$set(t.row,"skuCode",l)},expression:"scope.row.skuCode"}})]}}])}),l("el-table-column",{attrs:{label:"价格",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"mini",placeholder:"价格,单位:分"},model:{value:t.row.price,callback:function(l){e.$set(t.row,"price",l)},expression:"scope.row.price"}})]}}])}),l("el-table-column",{attrs:{label:"销量",width:200,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{size:"mini"},model:{value:t.row.sale,callback:function(l){e.$set(t.row,"sale",l)},expression:"scope.row.sale"}})]}}])}),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:120,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text"},on:{click:function(l){return e.removeSku(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1),l("div",{directives:[{name:"show",rawName:"v-show",value:3==e.step,expression:"step == 3"}]},[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",[e._v("详情描述")])]),l("el-divider"),l("el-form-item",{attrs:{size:"small",label:"商品详情"}},[l("TEditor",{ref:"Ti"})],1),l("el-form-item",{attrs:{label:"备注",size:"small"}},[l("el-input",{staticClass:"myInput",attrs:{type:"textarea",placeholder:"备注"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1)],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:24}},[l("el-form-item",{staticClass:"btnFa"},[l("div",{staticClass:"btns"},[e.step>1?l("el-button",{attrs:{size:"mini"},on:{click:e.pre}},[e._v("返回上一步")]):e._e(),e.step<3?l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.next}},[e._v(e._s(1==e.step?"下一步,填写库存信息":"下一步,填写移动端详情"))]):e._e(),3==e.step?l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交保存")]):e._e()],1)])],1)],1)],1)],1)],1)},r=[],i=l("1da1"),s=l("5530"),n=l("ade3"),o=(l("96cf"),l("159b"),l("ac1f"),l("1276"),l("4de4"),l("b0c0"),l("d81d"),l("a15b"),l("1b62")),c=l("7adc"),u=l("47ba"),d=l("8874"),m=l("8256"),p=l("ec26"),f={mixins:[o["a"]],components:{TEditor:m["a"]},data:function(){var e;return e={id:"",step:1,productCategoryList:[],brandList:[],ruleForm:{name:"",productSn:"",productCategoryId:"",brandId:"",description:"",originalPrice:"",price:"",promotionType:"",weight:"",verifyStatus:"",publishStatus:"",pic:"",recommendStatus:"",newStatus:"",previewStatus:"",keywords:"",lowStock:"",sort:"",detailTitle:"",note:""},serviceIds:[],dialogVisible:!1,dialogImageUrl:"",fileList:[],tempSkuList:[],skuList:[],tempTableObj:{},skuColorObj:{text:""},skuColorList:[],skuColorSel:[],skuSizeObj:{text:""},skuSizeList:[],skuSizeSel:[]},Object(n["a"])(e,"serviceIds",[]),Object(n["a"])(e,"rules",{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}]}),e},created:function(){this.getCategory(),this.getBrandList(),this.id=this.$route.query.id,console.log(this.id),this.id&&this.getDetail()},methods:{getTi:function(){var e=this.$refs.Ti.getContent();return e},setTi:function(e){this.$refs.Ti.setContent(e)},getDetail:function(){var e=this;Object(c["c"])(this.id).then((function(t){if(console.log("修改详情",t),e.ruleForm=t.data.product,t.data.skus.forEach((function(t){e.skuList.push(Object(s["a"])(Object(s["a"])({},t),{},{spData:JSON.parse(t.spData)})),e.tempSkuList.push(Object(s["a"])(Object(s["a"])({},t),{},{spData:JSON.parse(t.spData)}))})),e.ruleForm.albumPics){var l=e.ruleForm.albumPics.split(",");l.forEach((function(t){e.fileList.push({url:t})}))}e.ruleForm.serviceIds&&e.ruleForm.serviceIds.length>0&&(e.serviceIds=e.ruleForm.serviceIds.split(",")),e.setTi(e.ruleForm.detailMobileHtml)}))},pre:function(){this.step--},next:function(){this.step++},handleAvatarSuccess:function(e){console.log(e),this.ruleForm.pic=e.data.fileUrl},handleRemove:function(e,t){this.fileList=this.fileList.filter((function(t){return t.url!=e.url}))},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},imgUploadSuccess:function(e,t){e.success?(console.log(e),this.fileList.push({url:e.data.fileUrl}),this.$message.success("上传成功")):this.$message.error("上传失败")},getCategory:function(){var e=this;Object(u["a"])().then((function(t){e.productCategoryList=t.data.items[1].children}))},handleTableSuccess:function(e,t){var l=this;this.skuList.forEach((function(t){t===l.tempTableObj&&(t.pic=e.data.fileUrl)}))},getTableItem:function(e){this.tempTableObj=e},delParam:function(e,t,l){this[t]=this[t].filter((function(t){return t.tempId!==e.tempId})),this[l]=this[l].filter((function(t){return t.tempId!==e.tempId})),console.log("删除后的",this[t])},originalPriceChange:function(e){this.ruleForm.price=e},handleCheckAllChange:function(e){console.log("选中颜色",this.skuColorSel)},addSkuObj:function(e,t){var l=Object.assign({tempId:Object(p["a"])()},this[e]);this[t].push(l),this[e]={}},createSkus:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function l(){var a;return regeneratorRuntime.wrap((function(l){while(1)switch(l.prev=l.next){case 0:if(!(t.skuColorSel.length<=0)){l.next=3;break}return t.$message.error("请选中颜色"),l.abrupt("return");case 3:if(a={pic:"",price:t.ruleForm.price,sale:"",skuCode:"100000",stock:"",lowStock:""},"add"===e){l.next=7;break}return l.next=7,t.$confirm("此操作将清空sku列表,并生成新的列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.skuList=[],t.$message({type:"success",message:"创建成功!"})}));case 7:t.skuSizeSel.length>0?t.skuColorSel.forEach((function(e){t.skuSizeSel.forEach((function(l){var r=[{key:"颜色",value:e.text},{key:"大小",value:l.text}];t.skuList.push(Object(s["a"])({spData:r,tempId:Object(p["a"])()},a))}))})):t.skuColorSel.forEach((function(e){var l=[{key:"颜色",value:e.text}];t.skuList.push(Object(s["a"])({spData:l,tempId:Object(p["a"])()},a))})),console.log(t.skuList);case 9:case"end":return l.stop()}}),l)})))()},removeSku:function(e){this.skuList=this.skuList.filter((function(t){return t.tempId!=e.tempId}))},getBrandList:function(){var e=this;Object(d["b"])().then((function(t){console.log(t),e.brandList=t.data.items}))},submitForm:function(e){var t=this,l="",a="";this.getTi();this.brandList.forEach((function(e){e.id===t.ruleForm.brandId&&(l=e.name)})),this.productCategoryList.forEach((function(e){e.id===t.ruleForm.productCategoryId&&(a=e.name)}));var r=[];this.skuList.forEach((function(e){e.tempId&&delete e.tempId,r.push(Object(s["a"])(Object(s["a"])({},e),{},{spData:JSON.stringify(e.spData)})),console.log(r)})),this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var i=t.fileList.map((function(e){return e.url})),n=t.getTi();t.id?Object(c["e"])({pmsSkuStockList:r,product:Object(s["a"])(Object(s["a"])({},t.ruleForm),{},{productCategoryName:a,brandName:l,detailMobileHtml:n,albumPics:i.join(","),serviceIds:t.serviceIds.join(",")})}).then((function(e){e.success?(t.$message.success("修改成功"),t.$router.push("list")):t.$message.error("修改失败")})):Object(c["a"])({pmsSkuStockList:r,product:Object(s["a"])(Object(s["a"])({},t.ruleForm),{},{productCategoryName:a,brandName:l,detailMobileHtml:n,albumPics:i.join(","),serviceIds:t.serviceIds.join(",")})}).then((function(e){console.log("提交",e),e.success?(t.$message.success("新增成功"),t.$router.push("list")):t.$message.error("添加失败")}))}))}}},h=f,b=(l("eff3"),l("2877")),v=Object(b["a"])(h,a,r,!1,null,"4b7c3071",null);t["default"]=v.exports},"69fe":function(e,t,l){},"7adc":function(e,t,l){"use strict";l.d(t,"d",(function(){return r})),l.d(t,"a",(function(){return i})),l.d(t,"b",(function(){return s})),l.d(t,"c",(function(){return o})),l.d(t,"e",(function(){return n}));l("99af");var a=l("0c6d");function r(e,t,l){return Object(a["a"])({url:"/lejuAdmin/product/productsByPage/".concat(e,"/").concat(t),method:"POST",data:l})}function i(e){return Object(a["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"POST",data:e})}function s(e,t){return Object(a["a"])({url:"/lejuAdmin/product/del/".concat(e),method:"delete",data:t})}function n(e){return Object(a["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(e),method:"get"})}},8256:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[l("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),l("div",{staticClass:"editor-custom-btn-container"})])},r=[],i=(l("b680"),l("a9e3"),function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"upload-container"},[l("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" upload ")]),l("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" Click upload ")])],1),l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" Cancel ")]),l("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" Confirm ")])],1)],1)}),s=[],n=(l("b64b"),l("d81d"),l("d3b7"),l("3ca3"),l("ddb0"),l("2b3d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var l=t.uid,a=Object.keys(this.listObj),r=0,i=a.length;r<i;r++)if(this.listObj[a[r]].uid===l)return this.listObj[a[r]].url=e.files.file,void(this.listObj[a[r]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,l=Object.keys(this.listObj),a=0,r=l.length;a<r;a++)if(this.listObj[l[a]].uid===t)return void delete this.listObj[l[a]]},beforeUpload:function(e){var t=this,l=window.URL||window.webkitURL,a=e.uid;return this.listObj[a]={},new Promise((function(r,i){var s=new Image;s.src=l.createObjectURL(e),s.onload=function(){t.listObj[a]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},r(!0)}))}}}),o=n,c=(l("5278"),l("2877")),u=Object(c["a"])(o,i,s,!1,null,"3dae379b",null),d=u.exports,m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],p=m,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h=f,b=l("b85c"),v=[];function g(){return window.tinymce}var k=function(e,t){var l=document.getElementById(e),a=t||function(){};if(!l){var r=document.createElement("script");r.src=e,r.id=e,document.body.appendChild(r),v.push(a);var i="onload"in r?s:n;i(r)}function s(t){t.onload=function(){this.onerror=this.onload=null;var e,l=Object(b["a"])(v);try{for(l.s();!(e=l.n()).done;){var a=e.value;a(null,t)}}catch(r){l.e(r)}finally{l.f()}v=null},t.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+e),t)}}function n(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,l=Object(b["a"])(v);try{for(l.s();!(t=l.n()).done;){var a=t.value;a(null,e)}}catch(r){l.e(r)}finally{l.f()}v=null}}}l&&a&&(g()?a(null,l):v.push(a))},y=k,w=l("85c4"),S="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",j={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;y(S,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:h,menubar:this.menubar,plugins:p,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(l){t.value&&l.setContent(t.value),t.hasInit=!0,l.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",l.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},convert_urls:!1,images_upload_handler:function(e,l,a,r){r(0);var i=new FormData;i.append("file",e.blob()),w["default"].upload(i).then((function(e){e.success?(l(e.data.fileUrl),r(100)):(t.$message.error("上传失败,请重新上传"),r(100))}))}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){window.tinymce.get(this.tinymceId).insertContent('<img class="wscnph" src="'.concat(e,'" >'))}}},x=j,C=(l("0d59"),Object(c["a"])(x,a,r,!1,null,"1e4547d5",null));t["a"]=C.exports},"85c4":function(e,t,l){"use strict";l.d(t,"b",(function(){return r})),l.d(t,"c",(function(){return i}));l("99af");var a=l("0c6d");function r(e,t){return Object(a["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(e,"/").concat(t),method:"get"})}function i(e){return Object(a["a"])({url:"/lejuAdmin/material/delMaterial/".concat(e),method:"delete"})}},8874:function(e,t,l){"use strict";l.d(t,"a",(function(){return i})),l.d(t,"b",(function(){return r})),l.d(t,"e",(function(){return o})),l.d(t,"f",(function(){return c})),l.d(t,"d",(function(){return n})),l.d(t,"c",(function(){return s}));l("99af");var a=l("0c6d");function r(){return Object(a["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function i(e){return Object(a["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:e})}function s(e,t){return Object(a["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(e,"/").concat(t),method:"get"})}function n(e){return Object(a["a"])({url:"/lejuAdmin/brand/delBrand/".concat(e),method:"delete"})}function o(e){return Object(a["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:e})}},a15b:function(e,t,l){"use strict";var a=l("23e7"),r=l("44ad"),i=l("fc6a"),s=l("a640"),n=[].join,o=r!=Object,c=s("join",",");a({target:"Array",proto:!0,forced:o||!c},{join:function(e){return n.call(i(this),void 0===e?",":e)}})},ec26:function(e,t,l){"use strict";var a,r=new Uint8Array(16);function i(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function n(e){return"string"===typeof e&&s.test(e)}for(var o=n,c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!o(l))throw TypeError("Stringified UUID is invalid");return l}var m=d;function p(e,t,l){e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){l=l||0;for(var r=0;r<16;++r)t[l+r]=a[r];return t}return m(a)}t["a"]=p},eff3:function(e,t,l){"use strict";l("3545")}}]);