(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edae2c48"],{"0c6d":function(t,e,a){"use strict";a("d3b7");var n=a("bc3a"),r=a.n(n),o=a("5c96"),s=a("2f4d"),i=a("a18c"),l=r.a.create({timeout:5e3});l.interceptors.request.use((function(t){var e=Object(s["b"])();return e&&(t.headers["token"]=e),t}),(function(t){return console.log(t),Promise.reject(t)})),l.interceptors.response.use((function(t){var e=t.data;return 20002==e.code&&(Object(s["a"])(),i["b"].push("/login")),e}),(function(t){return console.log("err"+t),Object(o["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=l},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1b62":function(t,e,a){"use strict";var n=a("2f4d");e["a"]={data:function(){return{page:{currentPage:1,size:10,pageSizes:[10,20,30,40],total:0},uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(n["b"])()}}}}},6242:function(t,e,a){},"7adc":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return l})),a.d(e,"e",(function(){return i}));a("99af");var n=a("0c6d");function r(t,e,a){return Object(n["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"POST",data:a})}function o(t){return Object(n["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"POST",data:t})}function s(t,e){return Object(n["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"delete",data:e})}function i(t){return Object(n["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t),method:"get"})}},"841c":function(t,e,a){"use strict";var n=a("d784"),r=a("825a"),o=a("1d80"),s=a("129f"),i=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var o=r(t),l=String(this),c=o.lastIndex;s(c,0)||(o.lastIndex=0);var u=i(o,l);return s(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},8874:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return s}));a("99af");var n=a("0c6d");function r(){return Object(n["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function o(t){return Object(n["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function s(t,e){return Object(n["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"get"})}function i(t){return Object(n["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function l(t){return Object(n["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}},e51f5:function(t,e,a){"use strict";a("6242")},e6e2:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-collapse",{staticClass:"header1 c1"},[a("el-collapse-item",{staticClass:"title-des",attrs:{title:"商品管理介绍",name:"1"}},[a("div",[t._v(" 商品管理模块可以对客户端的商品进行增删改查等相关操作,来控制客户端商品的列表展示和商品详情 ")])])],1),a("el-collapse",{staticClass:"header1 c2"},[a("el-collapse-item",{staticClass:"title-des",attrs:{title:"条件查询",name:"2"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.search,"label-width":"100px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{size:"mini",placeholder:"商品名称/模糊查询"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商品货号",prop:"productSn"}},[a("el-input",{attrs:{size:"mini",placeholder:"商品货号"},model:{value:t.search.productSn,callback:function(e){t.$set(t.search,"productSn",e)},expression:"search.productSn"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌",prop:"brandId"}},[a("el-select",{attrs:{placeholder:"品牌",size:"mini"},model:{value:t.search.brandId,callback:function(e){t.$set(t.search,"brandId",e)},expression:"search.brandId"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"上架状态",prop:"publishStatus"}},[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"上架状态"},model:{value:t.search.publishStatus,callback:function(e){t.$set(t.search,"publishStatus",e)},expression:"search.publishStatus"}},[a("el-option",{attrs:{label:"上架",value:1}}),a("el-option",{attrs:{label:"未上架",value:0}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6,offset:0}},[a("el-form-item",{attrs:{label:"审核状态",prop:"verifyStatus"}},[a("el-select",{staticClass:"search-input",attrs:{size:"mini",clearable:"",placeholder:"审核状态"},model:{value:t.search.verifyStatus,callback:function(e){t.$set(t.search,"verifyStatus",e)},expression:"search.verifyStatus"}},[a("el-option",{attrs:{label:"审核",value:"1"}}),a("el-option",{attrs:{label:"未审核",value:"0"}})],1)],1)],1),a("el-col",{attrs:{span:16,align:"right"}},[a("el-form-item",[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.searchProduct}},[t._v("搜索")])],1)],1)],1)],1)],1)],1),a("el-card",{staticClass:"card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addProduct}},[t._v("新增")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.exportExcel}},[t._v("导出商品列表excle文件")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.productList}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{fixed:"left",type:"index",prop:"date",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"商品图片",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img img",attrs:{src:t.row.pic}})]}}])}),a("el-table-column",{attrs:{prop:"productSn",label:"商品名称",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.name))]),a("p",[t._v("品牌: "+t._s(e.row.brandName))]),a("p",[t._v(t._s(e.row.description))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品价格",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("原价: "+t._s(e.row.originalPrice))]),a("p",[t._v("现价: "+t._s(e.row.price))])]}}])}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center",width:"250"}}),a("el-table-column",{attrs:{prop:"price",label:"标签",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" 最新: "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.row.newStatus,callback:function(a){t.$set(e.row,"newStatus",a)},expression:"scope.row.newStatus"}})],1),a("p",[t._v(" 推荐: "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.row.recommendStatus,callback:function(a){t.$set(e.row,"recommendStatus",a)},expression:"scope.row.recommendStatus"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"price",label:"标签2",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" 发布: "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.row.publishStatus,callback:function(a){t.$set(e.row,"publishStatus",a)},expression:"scope.row.publishStatus"}})],1),a("p",[t._v(" 审核: "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.row.verifyStatus,callback:function(a){t.$set(e.row,"verifyStatus",a)},expression:"scope.row.verifyStatus"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"sku",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"default"},on:{click:function(a){return t.skuDetail(e.row)}}},[t._v(" 编辑sku")])]}}])}),a("el-table-column",{attrs:{prop:"weight",label:"重量",align:"center",width:"80"}}),a("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center",width:"150"}}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[a("span",[t._v("编辑")])]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.del(e.row)}}},[a("span",{staticStyle:{color:"red"}},[t._v("删除")])])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.pageSizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{width:"65%",title:"sku列表",visible:t.open},on:{"update:visible":function(e){t.open=e}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"default"},on:{click:t.addSku}},[t._v("新增")]),a("el-table",{attrs:{size:"mini",data:t.skuList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",fixed:"left"}}),a("el-table-column",{attrs:{label:"图片",width:120},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-upload",{staticStyle:{width:"100px",height:"100px"},attrs:{action:t.uploadUrl1,headers:t.uploadHeaders,"show-file-list":!1,"on-success":t.handleTableSuccess},nativeOn:{click:function(a){return t.getTableItem(e.row)}}},[e.row.pic?a("img",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"100px",height:"100px","margin-top":"-31px"}})])]}}])}),a("el-table-column",{attrs:{label:"颜色",width:160},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[0].value,callback:function(a){t.$set(e.row.spData[0],"value",a)},expression:"scope.row.spData[0].value"}})]}}])}),a("el-table-column",{attrs:{label:"大小",width:160},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spData[1]?a("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[1].value,callback:function(a){t.$set(e.row.spData[1],"value",a)},expression:"scope.row.spData[1].value"}}):t._e()]}}])}),a("el-table-column",{attrs:{label:"库存",width:200},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"自定义库存"},model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),a("el-table-column",{attrs:{label:"预警库存",width:200},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"预警库存"},model:{value:e.row.lowStock,callback:function(a){t.$set(e.row,"lowStock",a)},expression:"scope.row.lowStock"}})]}}])}),a("el-table-column",{attrs:{label:"锁定库存",width:200},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"锁定库存"},model:{value:e.row.lockStock,callback:function(a){t.$set(e.row,"lockStock",a)},expression:"scope.row.lockStock"}})]}}])}),a("el-table-column",{attrs:{label:"sku编码",width:200},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"自定义sku编码"},model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),a("el-table-column",{attrs:{label:"价格",width:160},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"价格,单位:分"},model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"销量",width:160},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.sale,callback:function(a){t.$set(e.row,"sale",a)},expression:"scope.row.sale"}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:160},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?a("span",[a("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text"},on:{click:function(a){return t.removeSku(e.row)}}},[t._v("删除 ")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.editSku(e.row)}}},[t._v("修改编辑 ")])],1):a("span",[a("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text"},on:{click:function(a){return t.removeNewSku(e.row)}}},[t._v("删除 ")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.saveNewSku(e.row)}}},[t._v("保存 ")])],1)]}}])})],1),a("el-button",{staticStyle:{"margin-top":"20px"},on:{click:function(e){t.open=!1}}},[t._v("取 消")])],1)])],1)},r=[],o=a("5530"),s=(a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("ac1f"),a("841c"),a("159b"),a("4de4"),a("8874")),i=a("7adc"),l=a("0c6d");function c(t){return Object(l["a"])({url:"/lejuAdmin/sku/getSkusByProductId/".concat(t),method:"get"})}function u(t){return Object(l["a"])({url:"/lejuAdmin/sku/delSku/".concat(t),method:"delete"})}function d(t){return Object(l["a"])({url:"/lejuAdmin/sku/addProductSkus",method:"post",data:t})}function p(t){return Object(l["a"])({url:"/lejuAdmin/sku/updateSkuInfo",method:"post",data:t})}var f=a("1b62"),m=a("ec26"),h={mixins:[f["a"]],data:function(){return{productList:[],search:{name:"",productSn:"",productId:"",brandId:"",publishStatus:"",verifyStatus:""},brandList:[],skuList:[],tempTableObj:{},open:!1,productId:""}},created:function(){this.getProductList(),this.getBrandList()},methods:{exportExcel:function(){var t=this;Promise.all([a.e("chunk-e2403282"),a.e("chunk-181fab9f"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(e){var a=["商品名称","商品重量(kg)","商品类别"],n=["name","weight","productCategoryName"],r=t.getJson(n);e.export_json_to_excel({header:a,data:r,filename:"商品信息列表",autoWidth:!0,bookType:"xlsx"})}))},getJson:function(t){return this.productList.map((function(e){return t.map((function(t){return e[t]}))}))},getProductList:function(){var t=this;this.loading=!0,Object(i["d"])(this.page.currentPage,this.page.size,this.search).then((function(e){console.log(e),t.productList=e.data.rows,t.page.total=e.data.total,t.loading=!1}))},getBrandList:function(){var t=this;Object(s["b"])().then((function(e){console.log(e),t.brandList=e.data.items}))},searchProduct:function(){this.page.currentPage=1,this.getProductList()},resetForm:function(t){this.$refs[t].resetFields()},handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.getProductList()},handleCurrentChange:function(t){this.page.currentPage=t,this.getProductList()},getSkuList:function(){var t=this;this.skuList=[],c(this.productId).then((function(e){console.log("sku信息",e),e.success&&(e.data.items.forEach((function(e){t.skuList.push(Object(o["a"])(Object(o["a"])({},e),{},{spData:JSON.parse(e.spData)}))})),t.open=!0)}))},skuDetail:function(t){this.productId=t.id,this.skuList=[],this.getSkuList()},removeSku:function(t){var e=this;this.$confirm("是否删除sku?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(t.id).then((function(t){t.success?(e.$message.success("删除sku成功"),e.getSkuList()):e.$message.error("删除sku失败")}))})).catch((function(t){console.log(t)}))},editSku:function(t){var e=this,a={id:t.id,lockStock:t.lockStock,lowStock:t.lowStock,stock:t.stock,pic:t.pic,price:t.price,productId:t.productId,sale:t.sale,skuCode:t.skuCode,spData:JSON.stringify(t.spData)};p(a).then((function(t){t.success?e.$message.success("修改sku成功"):e.$message.error("修改sku失败")}))},removeNewSku:function(t){var e=this;this.$confirm("是否删除sku?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.skuList=e.skuList.filter((function(e){return e.tempId!=t.tempId}))})).catch((function(t){console.log(t)}))},saveNewSku:function(t){var e=this;delete t.tempId,d(Object(o["a"])(Object(o["a"])({},t),{},{spData:JSON.stringify(t.spData)})).then((function(t){t.success?(e.$message.success("新增成功"),e.getSkuList()):e.$message.error("新增失败")}))},addSku:function(){var t={productId:this.productId,lockStock:"",lowStock:"",stock:"",pic:"",price:"",sale:"",skuCode:"",spData:[{key:"颜色",value:""},{key:"容量",value:""}],tempId:Object(m["a"])()};this.skuList.push(t)},getTableItem:function(t){this.tempTableObj=t},handleTableSuccess:function(t){var e=this;this.skuList.forEach((function(a){a===e.tempTableObj&&(a.pic=t.data.fileUrl)}))},edit:function(t){this.$router.push({path:"addDetail",query:{id:t.id}})},del:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(t.id).then((function(t){t.success?(e.$message({type:"success",message:"删除成功!"}),e.getProductList()):e.$message.error(t.message)}))})).catch((function(t){console.log(t)}))},addProduct:function(){this.$router.push("addDetail")}}},b=h,k=(a("e51f5"),a("2877")),g=Object(k["a"])(b,n,r,!1,null,"67968ab9",null);e["default"]=g.exports},ec26:function(t,e,a){"use strict";var n,r=new Uint8Array(16);function o(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function i(t){return"string"===typeof t&&s.test(t)}for(var l=i,c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!l(a))throw TypeError("Stringified UUID is invalid");return a}var p=d;function f(t,e,a){t=t||{};var n=t.random||(t.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){a=a||0;for(var r=0;r<16;++r)e[a+r]=n[r];return e}return p(n)}e["a"]=f}}]);