(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b2f59fa"],{"02cf":function(e,t,i){},"0c6d":function(e,t,i){"use strict";i("d3b7");var n=i("bc3a"),r=i.n(n),o=i("5c96"),a=i("2f4d"),l=i("a18c"),s=r.a.create({timeout:5e3});s.interceptors.request.use((function(e){var t=Object(a["b"])();return t&&(e.headers["token"]=t),e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 20002==t.code&&(Object(a["a"])(),l["b"].push("/login")),t}),(function(e){return console.log("err"+e),Object(o["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=s},"0d59":function(e,t,i){"use strict";i("69fe")},"1b3b":function(e,t,i){"use strict";i.d(t,"d",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l})),i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return c}));i("99af");var n=i("0c6d");function r(e,t,i){return Object(n["a"])({url:"/lejuAdmin/productArticle/findArticles/".concat(e,"/").concat(t),method:"POST",data:i})}function o(e){return Object(n["a"])({url:"/lejuAdmin/productArticle/del/".concat(e),method:"DELETE"})}function a(e){return Object(n["a"])({url:"/lejuAdmin/productArticle/changeShowStatus",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/lejuAdmin/productArticle/addArticle",method:"POST",data:e})}function s(e){return Object(n["a"])({url:"/lejuAdmin/productArticle/productArticle/".concat(e),method:"get"})}function c(e){return Object(n["a"])({url:"/lejuAdmin/productArticle/updateArticle",method:"post",data:e})}},"1b62":function(e,t,i){"use strict";var n=i("2f4d");t["a"]={data:function(){return{page:{currentPage:1,size:10,pageSizes:[10,20,30,40],total:0},uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(n["b"])()}}}}},2003:function(e,t,i){},"3dff":function(e,t,i){"use strict";i("2003")},5278:function(e,t,i){"use strict";i("02cf")},"69fe":function(e,t,i){},"6c7a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"card",attrs:{shadow:"never"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",[e._v("新增文章")])]),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"120px",rules:e.rules}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"作者",prop:"author"}},[i("el-input",{attrs:{placeholder:"作者","label-width":"120px"},model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"标题","label-width":"120px"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"是否显示"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.isShow,callback:function(t){e.$set(e.ruleForm,"isShow",t)},expression:"ruleForm.isShow"}})],1)],1),i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"摘要",prop:"summary"}},[i("el-input",{attrs:{type:"textarea",placeholder:"摘要"},model:{value:e.ruleForm.summary,callback:function(t){e.$set(e.ruleForm,"summary",t)},expression:"ruleForm.summary"}})],1)],1),i("el-col",[i("el-form-item",{attrs:{label:"封面图片"}},[i("el-upload",{ref:"uploadAtricle",staticClass:"upload-demo",attrs:{action:e.uploadUrl1,headers:e.uploadHeaders,multiple:"","on-success":e.handleAvatarSuccess,"show-file-list":!1}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传素材")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1),i("img",{staticStyle:{height:"150px"},attrs:{src:e.ruleForm.coverImg,alt:""}})],1)],1),i("el-col",[i("el-form-item",{attrs:{label:"切换副文本类型"}},[i("el-radio-group",{model:{value:e.ruleForm.editorType,callback:function(t){e.$set(e.ruleForm,"editorType",t)},expression:"ruleForm.editorType"}},[i("el-radio",{attrs:{label:0}},[e._v("富文本")]),i("el-radio",{attrs:{label:1}},[e._v("markDown")])],1),i("span",{staticClass:"warin"},[i("i",{staticClass:"el-icon-warning"}),e._v(" 注意!切换编辑器会清空编辑内容 ")])],1)],1),i("el-col",{attrs:{span:24}},[0==e.ruleForm.editorType?i("div",[i("el-upload",{ref:"innerUpload",staticClass:"upload-demo",attrs:{action:e.uploadUrl1,headers:e.uploadHeaders,multiple:"","on-success":e.handleInnerImg,"show-file-list":!1}},[i("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"}},[e._v("插入图片↓")])],1),i("TEditor",{ref:"Ti"})],1):e._e(),1==e.ruleForm.editorType?i("div",[i("MdEditor",{ref:"Md"})],1):e._e()]),i("el-col",{attrs:{align:"center"}},[i("el-form-item",[i("el-button",{staticClass:"btn",attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.add("ruleForm")}}},[e._v(e._s(e.id?"立即修改":"立即新增"))])],1)],1)],1)],1)],1)],1)},r=[],o=i("5530"),a=i("1b62"),l=i("1b3b"),s=i("8256"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:e.id}})},u=[],d=(i("b680"),i("a7be"),i("44f8"),i("a6e0"),i("547e")),h=i.n(d),m={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},f={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return m}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var e=Object.assign({},m,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}},watch:{value:function(e,t){e!==t&&e!==this.editor.getValue()&&this.editor.setValue(e)},language:function(e){this.destroyEditor(),this.initEditor()},height:function(e){this.editor.height(e)},mode:function(e){this.editor.changeMode(e)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var e=this;this.editor=new h.a(Object(o["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){e.$emit("input",e.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(e){this.editor.setValue(e)},getValue:function(){return this.editor.getValue()},setHtml:function(e){this.editor.setHtml(e)},getHtml:function(){return this.editor.getHtml()}}},p=f,g=i("2877"),b=Object(g["a"])(p,c,u,!1,null,null,null),v=b.exports,y={mixins:[a["a"]],components:{TEditor:s["a"],MdEditor:v},data:function(){return{loading:!1,ruleForm:{title:"",author:"",coverImg:"",summary:"",editorType:0,isShow:1},id:"",rules:{author:[{required:!0,message:"请输入作者",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}]}}},created:function(){this.id=this.$route.params.id,this.id&&this.getArticleDetail()},methods:{getArticleDetail:function(){var e=this;Object(l["e"])(this.id).then((function(t){console.log(t),t.success?(e.ruleForm=t.data.productArticle,console.log(e.ruleForm),e.$nextTick((function(){if(0===e.ruleForm.editorType)e.$refs.Ti.setContent(e.ruleForm.content1);else{if(1!==e.ruleForm.editorType)return;e.$refs.Md.setValue(e.ruleForm.content1)}}))):e.$message.error("获取文章内容失败")}))},handleAvatarSuccess:function(e){this.$refs.uploadAtricle.clearFiles(),this.ruleForm.coverImg=e.data.fileUrl},handleInnerImg:function(e){e.success?(this.$refs.innerUpload.clearFiles(),this.$refs.Ti.imageSuccessCBK(e.data.fileUrl)):this.$message.error("素材上传失败")},add:function(e){var t=this,i="";0===this.ruleForm.editorType?i=this.$refs.Ti.getContent():1===this.ruleForm.editorType&&(i=this.$refs.Md.getValue());var n=Object(o["a"])(Object(o["a"])({},this.ruleForm),{},{content1:i});this.loading=!0,this.$refs[e].validate((function(e){e?t.id?Object(l["f"])(n).then((function(e){e.success?(t.$message.success("修改文章成功"),t.$router.push({path:"/content/article"})):t.$message.error("修改文章失败"),t.loading=!1})):Object(l["a"])(n).then((function(e){e.success?(t.$message.success("添加文章成功"),t.$router.push({path:"/content/article"})):t.$message.error("添加文章失败"),t.loading=!1})):(t.loading=!1,t.$message.warning("请按要求填写表单"))}))}}},w=y,j=(i("3dff"),Object(g["a"])(w,n,r,!1,null,"e1eb581a",null));t["default"]=j.exports},8256:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),i("div",{staticClass:"editor-custom-btn-container"})])},r=[],o=(i("b680"),i("a9e3"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" upload ")]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" Click upload ")])],1),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" Cancel ")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" Confirm ")])],1)],1)}),a=[],l=(i("b64b"),i("d81d"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var i=t.uid,n=Object.keys(this.listObj),r=0,o=n.length;r<o;r++)if(this.listObj[n[r]].uid===i)return this.listObj[n[r]].url=e.files.file,void(this.listObj[n[r]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,i=Object.keys(this.listObj),n=0,r=i.length;n<r;n++)if(this.listObj[i[n]].uid===t)return void delete this.listObj[i[n]]},beforeUpload:function(e){var t=this,i=window.URL||window.webkitURL,n=e.uid;return this.listObj[n]={},new Promise((function(r,o){var a=new Image;a.src=i.createObjectURL(e),a.onload=function(){t.listObj[n]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},r(!0)}))}}}),s=l,c=(i("5278"),i("2877")),u=Object(c["a"])(s,o,a,!1,null,"3dae379b",null),d=u.exports,h=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=h,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],p=f,g=i("b85c"),b=[];function v(){return window.tinymce}var y=function(e,t){var i=document.getElementById(e),n=t||function(){};if(!i){var r=document.createElement("script");r.src=e,r.id=e,document.body.appendChild(r),b.push(n);var o="onload"in r?a:l;o(r)}function a(t){t.onload=function(){this.onerror=this.onload=null;var e,i=Object(g["a"])(b);try{for(i.s();!(e=i.n()).done;){var n=e.value;n(null,t)}}catch(r){i.e(r)}finally{i.f()}b=null},t.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+e),t)}}function l(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,i=Object(g["a"])(b);try{for(i.s();!(t=i.n()).done;){var n=t.value;n(null,e)}}catch(r){i.e(r)}finally{i.f()}b=null}}}i&&n&&(v()?n(null,i):b.push(n))},w=y,j=i("85c4"),_="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",k={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;w(_,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:p,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){t.value&&i.setContent(t.value),t.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",i.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},convert_urls:!1,images_upload_handler:function(e,i,n,r){r(0);var o=new FormData;o.append("file",e.blob()),j["default"].upload(o).then((function(e){e.success?(i(e.data.fileUrl),r(100)):(t.$message.error("上传失败,请重新上传"),r(100))}))}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){window.tinymce.get(this.tinymceId).insertContent('<img class="wscnph" src="'.concat(e,'" >'))}}},O=k,S=(i("0d59"),Object(c["a"])(O,n,r,!1,null,"1e4547d5",null));t["a"]=S.exports},"85c4":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return o}));i("99af");var n=i("0c6d");function r(e,t){return Object(n["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(e,"/").concat(t),method:"get"})}function o(e){return Object(n["a"])({url:"/lejuAdmin/material/delMaterial/".concat(e),method:"delete"})}}}]);