(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-468bfaed"],{"0c6d":function(t,e,r){"use strict";r("d3b7");var a=r("bc3a"),s=r.n(a),i=r("5c96"),n=r("2f4d"),l=r("a18c"),o=s.a.create({timeout:5e3});o.interceptors.request.use((function(t){var e=Object(n["b"])();return e&&(t.headers["token"]=e),t}),(function(t){return console.log(t),Promise.reject(t)})),o.interceptors.response.use((function(t){var e=t.data;return 20002==e.code&&(Object(n["a"])(),l["b"].push("/login")),e}),(function(t){return console.log("err"+t),Object(i["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=o},3239:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",{staticClass:"card"},[r("el-steps",{attrs:{active:t.steps}},t._l(t.stepList,(function(t,e){return r("el-step",{key:e,attrs:{title:t.name,description:t.time?t.time:""}})})),1),r("el-divider"),r("div",{staticClass:"table-main"},[r("div",{staticClass:"table-title"},[t._v(" 订单信息: "),r("span",{staticStyle:{"margin-left":"10px"}},[0===t.status?r("el-tag",{attrs:{type:"danger",size:"small",effect:"dark"}},[t._v(" 待付款 ")]):1===t.status?r("el-tag",{attrs:{size:"small",type:"warning",effect:"dark"}},[t._v("待发货")]):2===t.status?r("el-tag",{attrs:{size:"small"}},[t._v(" 已发货 ")]):3===t.status?r("el-tag",{attrs:{size:"small",effect:"dark"}},[t._v("已完成")]):4===t.status?r("el-tag",{attrs:{size:"small",type:"info",effect:"dark"}},[t._v("已关闭")]):r("el-tag",{attrs:{type:"info",size:"small"}},[t._v(" 无效订单 ")])],1)]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[t._v(" 订单金额: "),r("span",{staticClass:"totalAmount"},[t._v(t._s(t.detailObj.totalAmount))])]),r("el-col",{attrs:{span:6}},[t._v(" 订单编号 :"+t._s(t.detailObj.orderSn)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 用户账号 :"+t._s(t.detailObj.memberUsername)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 备注 :"+t._s(t.detailObj.note)+" ")])],1),r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[t._v(" 下单时间 :"+t._s(t.detailObj.createTime)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 付款时间 :"+t._s(t.detailObj.paymentTime)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 发货时间 :"+t._s(t.detailObj.deliveryTime)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 收货时间 :"+t._s(t.detailObj.receiveTime)+" ")])],1)],1),r("el-divider"),r("div",{staticClass:"table-title"},[t._v(" 收货人信息: "),r("span",{staticStyle:{"margin-left":"10px"}})]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[t._v(" 收货人:"+t._s(t.detailObj.receiverName)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 用户姓名 :"+t._s(t.detailObj.memberUsername)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 手机号码 :"+t._s(t.detailObj.receiverPhone)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 邮政编码 :"+t._s(t.detailObj.receiverPostCode)+" ")])],1),r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[t._v(" 地市 :"+t._s(t.detailObj.receiverProvince+" "+t.detailObj.receiverCity)+" ")]),r("el-col",{attrs:{span:6}},[t._v(" 详细地址 :"+t._s(t.detailObj.receiverDetailAddress)+" ")])],1)],1),r("el-divider"),r("div",{staticClass:"table-title"},[t._v(" 商品信息: "),r("span",{staticStyle:{"margin-left":"10px"}}),r("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:t.orderItemList,border:""}},[r("el-table-column",{attrs:{prop:"productName",label:"商品名称",align:"center"}}),r("el-table-column",{attrs:{prop:"productName",label:"商品图片",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.productPic,alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"isReturn",label:"是否退货",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.isReturn?r("span",{staticStyle:{color:"red",cursor:"pointer"},on:{click:function(r){return t.goReturn(e.row)}}},[t._v("是")]):r("span",[t._v("否")])]}}])}),r("el-table-column",{attrs:{prop:"productBrand",label:"品牌",width:"200px",align:"center"}}),r("el-table-column",{attrs:{prop:"productPrice",label:"价格",width:"200px",align:"center"}}),r("el-table-column",{attrs:{prop:"productQuantity",label:"商品数量",width:"200px",align:"center"}}),r("el-table-column",{attrs:{fixed:"right",prop:"totalPrice",label:"小计",width:"250px",align:"center"}})],1)],1),r("div",{staticClass:"table-title"},[t._v(" 费用信息: "),r("span",{staticStyle:{"margin-left":"10px"}})]),r("div",{staticClass:"info"},[r("el-row",{staticClass:"orderInfo",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("span",{staticClass:"totalAmount"},[t._v("运费金额:0 ")])]),r("el-col",{attrs:{span:6}},[t._v(" 订单总金额 : "),r("span",{staticClass:"totalAmount"},[t._v(t._s(t.detailObj.totalAmount))])]),r("el-col",{attrs:{span:6}},[t._v(" 实际金额 : "),r("span",{staticClass:"totalAmount"},[t._v(t._s(t.detailObj.payAmount))])]),r("el-col",{attrs:{span:6}},[t._v(" 促销优惠价格 : "),r("span",{staticClass:"totalAmount"},[t._v(" "+t._s(t.detailObj.promotionAmount?t.detailObj.promotionAmount:0))])])],1)],1),t.status>1?r("el-divider"):t._e(),t.status>1?r("div",{staticClass:"table-main"},[r("div",{staticClass:"table-title"},[t._v(" 物流信息: "),r("span",{staticStyle:{color:"gray"}},[t._v(t._s(t.detailObj.deliveryCompany)+" [ "+t._s(t.detailObj.deliverySn)+" ]")])]),r("el-table",{staticStyle:{width:"100%","margin-top":"25px"},attrs:{data:t.expressData,border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"AcceptTime",label:"时间",width:"180"}}),r("el-table-column",{attrs:{prop:"AcceptStation",label:"状态"}}),r("el-table-column",{attrs:{prop:"Remark",label:"备注",width:"450"}})],1)],1):t._e(),1==t.status?r("div",[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,inline:!1,size:"mini"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6,offset:0}},[r("el-form-item",{attrs:{prop:"deliveryCompany",label:"物流公司"}},[r("el-select",{staticClass:"myInput",attrs:{size:"mini",placeholder:"请选择物流公司",clearable:""},model:{value:t.form.deliveryCompany,callback:function(e){t.$set(t.form,"deliveryCompany",e)},expression:"form.deliveryCompany"}},t._l(t.options,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.name}})})),1)],1)],1),r("el-col",{attrs:{span:10,offset:0}},[r("el-form-item",{attrs:{prop:"deliverySn",label:"物流单号"}},[r("el-input",{staticClass:"myInput",attrs:{placeholder:"",size:"mini"},model:{value:t.form.deliverySn,callback:function(e){t.$set(t.form,"deliverySn",e)},expression:"form.deliverySn"}})],1)],1)],1)],1)],1):t._e(),r("div",{staticClass:"button_main"},[1===t.status?r("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:t.sendOrder}},[t._v("确认发货")]):t._e(),2===t.status?r("div",[t.forceSendShow?r("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:t.forceFinishOrder}},[t._v(" 强制确认收货 ")]):t._e()],1):t._e(),3===t.status?r("div",[r("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:t.finishOrder}},[t._v("关闭订单")])],1):t._e()],1)],1)],1)],1)},s=[],i=(r("159b"),r("3a10")),n=r("ffac"),l={data:function(){return{options:[{id:0,name:"顺丰快递"},{id:1,name:"韵达快递"},{id:2,name:"中国邮政"},{id:3,name:"申通快递"},{id:4,name:"中通快递"}],form:{deliverySn:"",deliveryCompany:""},rules:{deliveryCompany:[{required:!0,message:"请填写物流公司",trigger:"change"}],deliverySn:[{required:!0,message:"请填写物流单号",trigger:"blur"}]},steps:1,id:"",stepList:[{name:"待付款"},{name:"待发货"},{name:"已发货"},{name:"已完成"},{name:"已关闭"}],status:1,detailObj:{},orderItemList:[],forceSendShow:!1}},created:function(){this.getOrderDetail()},computed:{expressData:function(){return n.Traces}},methods:{getOrderDetail:function(){var t=this;this.id=this.$route.query.id,Object(i["e"])(this.id).then((function(e){t.detailObj=e.data.orderDetail.orderBase,t.orderItemList=e.data.orderDetail.orderItems,console.log("订单详情",e),t.status=e.data.orderDetail.orderBase.status,t.steps=t.status+1,t.isQZsh(),t.initStepList()}))},sendOrder:function(){var t=this;this.$refs.form.validate((function(e){e?Object(i["j"])({orderId:t.id,deliverySn:t.form.deliverySn,deliveryCompany:t.form.deliveryCompany}).then((function(e){e.success?(t.$message.success("确定发货成功"),t.getOrderDetail()):t.$message.error("确定发货失败")})).catch((function(e){t.$message.error("确认发货失败")})):t.$message.warning("请填写必要信息")}))},initStepList:function(){this.stepList[0].time=this.detailObj.createTime,this.stepList[1].time=this.detailObj.paymentTime,this.stepList[2].time=this.detailObj.deliveryTime,this.stepList[3].time=this.detailObj.receiveTime,this.stepList[4].time=this.detailObj.finishTime,this.status=this.detailObj.status},isQZsh:function(){var t=this;console.log(1111),this.orderItemList.forEach((function(e){1===e.isReturn&&(console.log(e.isReturn),t.forceSendShow=!0,console.log(t.forceSendShow))}))},forceFinishOrder:function(){var t=this;Object(i["h"])(this.id).then((function(e){e.success?(t.$message.success("强制确认收货成功"),t.getOrderDetail()):t.$message.error("强制确认收货失败")}))},finishOrder:function(){var t=this;Object(i["d"])(this.id).then((function(e){e.success?(t.$message.success("关闭订单成功"),t.getOrderDetail()):t.$message.error("关闭订单失败")}))},goReturn:function(t){this.$router.push({path:"backDetail",query:{id:t.returnId}})}}},o=l,c=(r("5942"),r("2877")),d=Object(c["a"])(o,a,s,!1,null,"5060010f",null);e["default"]=d.exports},"3a10":function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"e",(function(){return i})),r.d(e,"j",(function(){return n})),r.d(e,"d",(function(){return l})),r.d(e,"h",(function(){return o})),r.d(e,"c",(function(){return c})),r.d(e,"f",(function(){return d})),r.d(e,"a",(function(){return u})),r.d(e,"i",(function(){return p})),r.d(e,"g",(function(){return m}));r("99af");var a=r("0c6d");function s(t,e,r){return Object(a["a"])({url:"/lejuAdmin/order/findOrdersByPage/".concat(t,"/").concat(e),method:"post",data:r})}function i(t){return Object(a["a"])({url:"/lejuAdmin/order/orderDetail/".concat(t),method:"get"})}function n(t){return Object(a["a"])({url:"/lejuAdmin/order/sendDone",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/lejuAdmin/order/finishOrder/".concat(t),method:"post"})}function o(t){return Object(a["a"])({url:"/lejuAdmin/order/receiveProductsForce/".concat(t),method:"post"})}function c(t,e,r){return Object(a["a"])({url:"/lejuAdmin/orderReturn/findReturnApply/".concat(t,"/").concat(e),method:"post",data:r})}function d(t){return Object(a["a"])({url:"/lejuAdmin/orderReturn/".concat(t),method:"get"})}function u(t,e){return Object(a["a"])({url:"/lejuAdmin/orderReturn/agreeApply/".concat(t),method:"post",data:e})}function p(t,e){return Object(a["a"])({url:"/lejuAdmin/orderReturn/rejectApply/".concat(t),method:"post",data:e})}function m(t,e){return Object(a["a"])({url:"/lejuAdmin/orderReturn/receiveProduct/".concat(t),method:"post",data:e})}},5942:function(t,e,r){"use strict";r("c95a")},c95a:function(t,e,r){},ffac:function(t){t.exports=JSON.parse('{"EBusinessID":"1109259","OrderCode":"","ShipperCode":"EMS","LogisticCode":"5042260908504","Success":true,"Reason":"","State":"2","CallBack":"0","Traces":[{"AcceptTime":"2015-03-06 21:16:58","AcceptStation":"深圳市横岗速递营销部已收件","Remark":"揽投员姓名：钟定基;联系电话：13883838888"},{"AcceptTime":"2015-03-07 14:25:00","AcceptStation":"离开深圳市 发往广州市","Remark":""},{"AcceptTime":"2015-03-08 00:17:00","AcceptStation":"到达广东速递物流公司广航中心处理中心（经转）","Remark":""},{"AcceptTime":"2015-03-08 01:15:00","AcceptStation":"离开广州市 发往北京市（经转）","Remark":""},{"AcceptTime":"2015-03-09 09:01:00","AcceptStation":"到达北京黄村转运站处理中心（经转）","Remark":""},{"AcceptTime":"2015-03-09 18:39:00","AcceptStation":"离开北京市 发往呼和浩特市（经转）","Remark":""},{"AcceptTime":"2015-03-10 18:06:00","AcceptStation":"到达  呼和浩特市 处理中心","Remark":""},{"AcceptTime":"2015-03-11 09:53:48","AcceptStation":"呼和浩特市邮政速递物流分公司金川揽投部安排投递","Remark":"投递员姓名：安长虹;联系电话：18047140142"}]}')}}]);