(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf45f94c"],{"0c6d":function(t,e,a){"use strict";a("d3b7");var n=a("bc3a"),r=a.n(n),o=a("5c96"),i=a("2f4d"),l=a("a18c"),s=r.a.create({timeout:5e3});s.interceptors.request.use((function(t){var e=Object(i["b"])();return e&&(t.headers["token"]=e),t}),(function(t){return console.log(t),Promise.reject(t)})),s.interceptors.response.use((function(t){var e=t.data;return 20002==e.code&&(Object(i["a"])(),l["b"].push("/login")),e}),(function(t){return console.log("err"+t),Object(o["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=s},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1b62":function(t,e,a){"use strict";var n=a("2f4d");e["a"]={data:function(){return{page:{currentPage:1,size:10,pageSizes:[10,20,30,40],total:0},uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(n["b"])()}}}}},"32e8":function(t,e,a){},"7adc":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return l}));a("99af");var n=a("0c6d");function r(t,e,a){return Object(n["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"POST",data:a})}function o(t){return Object(n["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"POST",data:t})}function i(t,e){return Object(n["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"delete",data:e})}function l(t){return Object(n["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t),method:"get"})}},"841c":function(t,e,a){"use strict";var n=a("d784"),r=a("825a"),o=a("1d80"),i=a("129f"),l=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var o=r(t),s=String(this),c=o.lastIndex;i(c,0)||(o.lastIndex=0);var u=l(o,s);return i(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},8874:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return i}));a("99af");var n=a("0c6d");function r(){return Object(n["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function o(t){return Object(n["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function i(t,e){return Object(n["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"get"})}function l(t){return Object(n["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function s(t){return Object(n["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}},d2da:function(t,e,a){"use strict";a("32e8")},e7f2:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"card",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.list}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{fixed:"left",type:"index",prop:"date",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"商品图片",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img",attrs:{src:t.row.pic}})]}}])}),a("el-table-column",{attrs:{prop:"productSn",label:"活动时间",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("开始时间: "+t._s(e.row.promotionStartTime))]),a("p",[t._v("结束时间: "+t._s(e.row.promotionEndTime))])]}}])}),a("el-table-column",{attrs:{prop:"productSn",label:"是否过期",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" "+t._s(t.isJudgeTime(e.row.promotionStartTime,e.row.promotionEndTime))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center",width:"300"}}),a("el-table-column",{attrs:{prop:"brandName",label:"品牌名称",align:"center",width:"250"}}),a("el-table-column",{attrs:{prop:"price",label:"商品价格",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",width:"350"}}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.del(e.row)}}},[a("span",{staticStyle:{color:"red"}},[t._v("删除")])])]}}])})],1)],1),a("el-dialog",{staticStyle:{"margin-top":"-100px"},attrs:{title:"热销详情",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-main"},[a("el-card",{staticClass:"main",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("条件查询")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini",placeholder:"商品名称/模糊查询"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini",placeholder:"商品货号"},model:{value:t.search.productSn,callback:function(e){t.$set(t.search,"productSn",e)},expression:"search.productSn"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"品牌",size:"mini"},model:{value:t.search.brandId,callback:function(e){t.$set(t.search,"brandId",e)},expression:"search.brandId"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"上架状态"},model:{value:t.search.publishStatus,callback:function(e){t.$set(t.search,"publishStatus",e)},expression:"search.publishStatus"}},[a("el-option",{attrs:{label:"上架",value:"1"}}),a("el-option",{attrs:{label:"未上架",value:"0"}})],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-select",{staticClass:"search-input",attrs:{size:"mini",clearable:"",placeholder:"审核状态"},model:{value:t.search.verifyStatus,callback:function(e){t.$set(t.search,"verifyStatus",e)},expression:"search.verifyStatus"}},[a("el-option",{attrs:{label:"审核",value:"1"}}),a("el-option",{attrs:{label:"未审核",value:"0"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:t.doReset}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.doSearch}},[t._v("搜索")])],1)],1)],1),a("el-card",{staticClass:"table_main",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品列表")])]),a("el-radio-group",{staticStyle:{width:"100%"},on:{change:t.radioChange},model:{value:t.productId,callback:function(e){t.productId=e},expression:"productId"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.productList}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{fixed:"left",type:"index",prop:"date",label:"序号",align:"center"}}),a("el-table-column",{attrs:{label:"选择",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id}},[a("span")])]}}])}),a("el-table-column",{attrs:{label:"商品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img img",attrs:{src:t.row.pic}})]}}])}),a("el-table-column",{attrs:{prop:"productSn",label:"商品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.name))]),a("p",[t._v("品牌: "+t._s(e.row.brandName))]),a("p",[t._v(t._s(e.row.description))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品价格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("原价: "+t._s(e.row.originalPrice))]),a("p",[t._v("现价: "+t._s(e.row.price))])]}}])}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center"}}),a("el-table-column",{attrs:{prop:"weight",label:"重量",align:"center"}})],1)],1),a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.pageSizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"编辑限时活动",visible:t.isEditOpen,width:"50%"},on:{"update:visible":function(e){t.isEditOpen=e}}},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"form",attrs:{model:t.form,inline:!0,"label-width":"100px",size:"mini"}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品原价"}},[a("span",[t._v(t._s(t.productDetail.price))])])],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("span",[t._v(t._s(t.productDetail.name))])])],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"促销价格"}},[a("el-input-number",{staticClass:"myInput",model:{value:t.form.promotionPrice,callback:function(e){t.$set(t.form,"promotionPrice",e)},expression:"form.promotionPrice"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{staticClass:"myInput",model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{staticClass:"myInput",attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.promotionStartTime,callback:function(e){t.$set(t.form,"promotionStartTime",e)},expression:"form.promotionStartTime"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{staticClass:"myInput",attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.promotionEndTime,callback:function(e){t.$set(t.form,"promotionEndTime",e)},expression:"form.promotionEndTime"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"活动限购数量"}},[a("el-input",{staticClass:"myInput",model:{value:t.form.promotionPerLimit,callback:function(e){t.$set(t.form,"promotionPerLimit",e)},expression:"form.promotionPerLimit"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品图片"}},[a("img",{staticStyle:{width:"150px",height:"150px"},attrs:{src:t.productDetail.pic,alt:""}})])],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isEditOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.couldNext},on:{click:t.onSubmit}},[t._v("确定")])],1)],1)],1)},r=[],o=a("5530"),i=(a("ac1f"),a("841c"),a("159b"),a("0c6d"));function l(t){return Object(i["a"])({url:"/lejuAdmin/homeRecommend/addRecommend",method:"POST",data:t})}function s(t){return Object(i["a"])({url:"/lejuAdmin/homeRecommend/delRecommend/".concat(t),method:"DELETE"})}function c(){return Object(i["a"])({url:"/lejuAdmin/homeRecommend/findAllRecommends",method:"GET"})}var u=a("8874"),d=a("7adc"),p=a("1b62"),m={mixins:[p["a"]],data:function(){return{isEditOpen:!1,loading:!1,list:[],dialogVisible:!1,search:{name:"",productSn:"",brandId:"",publishStatus:"",verifyStatus:""},brandList:[],productList:[],couldNext:!1,productId:"",form:{productId:"",promotionPrice:"",promotionPerLimit:"",sort:"",promotionStartTime:"",promotionEndTime:""},productDetail:{}}},created:function(){this.init(),this.getBrandList(),this.getProductList()},methods:{init:function(){var t=this;this.loading=!0,c().then((function(e){console.log(e),e.success&&(t.list=e.data.items),t.loading=!1}))},getProductList:function(){var t=this;this.loading=!0,Object(d["d"])(this.page.currentPage,this.page.size,this.search).then((function(e){console.log("商品列表",e),t.productList=e.data.rows,t.page.total=e.data.total,t.loading=!1}))},getBrandList:function(){var t=this;Object(u["b"])().then((function(e){console.log("品牌列表",e),t.brandList=e.data.items}))},doReset:function(){this.search=this.$options.data().search},doSearch:function(){this.page.currentPage=1,this.getProductList()},del:function(t){var e=this;console.log(t),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s(t.recommendId).then((function(t){t.success?(e.init(),e.$message({type:"success",message:"删除成功!"})):e.$message.error(t.message)}))})).catch((function(t){console.log(t)}))},radioChange:function(t){var e=this;this.isEditOpen=!0,this.productList.forEach((function(a){a.id===t&&(e.productDetail=Object.assign({},a))})),this.form={},this.productId=t},isJudgeTime:function(t,e){var a=(new Date).getTime()-new Date(e).getTime();return a>0?"过期":"否"},handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.getProductList()},handleCurrentChange:function(t){this.page.currentPage=t,this.getProductList()},onSubmit:function(){var t=this;this.$confirm("是否确认新增最热推荐商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("ss"),t.couldNext=!0,l(Object(o["a"])(Object(o["a"])({},t.form),{},{productId:t.productId})).then((function(e){console.log("res",e),e.success?(t.init(),t.isEditOpen=!1,t.dialogVisible=!1,t.productId="",t.$emit("success"),t.$message.success("添加成功")):t.$message.error("添加失败"),t.couldNext=!1}))})).catch((function(t){console.log("quxiao")}))}}},f=m,b=(a("d2da"),a("2877")),h=Object(b["a"])(f,n,r,!1,null,"728415c2",null);e["default"]=h.exports}}]);